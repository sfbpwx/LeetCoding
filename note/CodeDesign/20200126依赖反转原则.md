## 依赖反转原则
### 开场问题
- “依赖反转”这个概念指的是“谁跟谁”的“什么依赖”被反转了？“反转”两个字该如何理解？
- 我们还经常听到另外两个概念：“控制反转”和“依赖注入”。这两个概念跟“依赖反转”有什么区别和联系呢？它们说的是同一个事情吗？
- 如果你熟悉 Java 语言，那 Spring 框架中的 IOC 跟这些概念又有什么关系呢？

### 控制反转(IOC)
框架提供一个可扩展的代码骨架，用来组装对象、管理整个执行流程。
程序员利用框架进行开发时，只需要往预留的扩展点，添加自己的业务代码，就可以利用框架来驱动整个程序流程的执行。

- 控制：对程序执行流程的控制
- 反转：在没有使用框架之前，程序员自己控制整个程序的执行。在使用框架以后，整个程序的自行流程可以通过框架来控制。流程的控制权从程序员“反转”到了框架。

### 依赖注入（DI)
依赖注入与控制反转恰恰相反，是一种具体的编码技巧。

- 概念：不通过new()的方式在类内部创建依赖类，而是通过将依赖的类对象在外部创建好，通过构造函数、函数参数等方式传递（或注入）给类使用。
- 依赖注入的好处：提高了代码的扩展性。可以灵活地替换依赖的类。
### 依赖注入框架（DI Framework）
在实际的软件开发中，一些项目可能会涉及几十、上百、甚至几百个类，类对象的创建和依赖注入会变得非常复杂。如果这部分工作都是靠程序员自己写代码来完成，容易出错且开发成本也比较高。而对象创建和依赖注入的工作，本身跟具体的业务无关，我们完全可以抽象成框架来自动完成。

我们只需要通过依赖注入框架提供的扩展点，简单配置一下所有需要创建的类对象、类与类之间的依赖关系，就可以实现由框架来自动创建对象、管理对象的生命周期、依赖注入等原本需要程序员来做的事情。

上面内容指的是在main方法中进行代码执行过程中，创建对象的过程。

### 依赖反转原则（DIP）
简单来说就是，在调用链上，调用者属于高层，被调用者属于低层。在平时的业务代码开发中，高层模块依赖底层模块是没有任何问题的。实际上，这条原则主要还是用来指导框架层面的设计，跟前面讲到的控制反转类似。

这里以tomcat作为例子

Tomcat 是运行 Java Web 应用程序的容器。我们编写的 Web 应用程序代码只需要部署在 Tomcat 容器下，便可以被 Tomcat 容器调用执行。按照之前的划分原则，Tomcat 就是高层模块，我们编写的 Web 应用程序代码就是低层模块。Tomcat 和应用程序代码之间并没有直接的依赖关系，两者都依赖同一个“抽象”，也就是 Servlet 规范。Servlet 规范不依赖具体的 Tomcat 容器和应用程序的实现细节，而 Tomcat 容器和应用程序依赖 Servlet 规范。

