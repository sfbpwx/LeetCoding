## 索引（index）

### 问题
Mysql底层依赖的是B+树，**那Redis这类的Key-Value结构的数据库索引是如何实现的。底层依赖又是什么数据结构呢？**

### 索引的需求定义
1. 功能性需求
- 数据是格式化数据还是非格式化数据。
MySQL数据就是结构化数据。搜索引擎中的网页就属于非结构化数据。对于非结构化数据，我们一般需要做预处理，提取查询关键字对关键字构建索引。

- 数据是静态数据还是动态数据
静态数据只需要考虑查询效率的问题。动态数据构建索引就需要动态更新索引和兼顾更新索引的性能。

- 索引存储在内存还是硬盘
索引的存储位置决定索引的大小和索引的操作次数。

- 单值查找还是区间查找

- 单关键词查找还是多关键词组合查找
多关键词组合查找分很多种情况。比如MySQL数据库就可以针对多个关键词建立索引。对于搜索引擎这样的非结构化数据，就可以针对单个关键词建立索引，然后通过交并集合的方式来计算结果。

2. 非功能性需求
- 不管是存储在内存还是磁盘，索引对存储空间的消耗都不能过大
谨防索引对存储空间的消耗超过原始数据的情况。

- 在考虑索引查询效率的同时，我们还要考虑索引的维护成本
索引维护成本也分为静态的索引构建和动态的更新索引。其中动态更新索引势必会影响到增删改查性能。

### 构建索引的常用数据结构
#### 散列表
散列表的增删改差性能非常好，时间复杂度是O(1)。一些键值数据库（redis、memcache)都是用散列表构建在内存中。

#### 红黑树
红黑树数据查找、删除、插入的时间复杂度是O(logn)，Ext文件对磁盘块的索引用的就是红黑树。

#### B+树
大型关系型数据库通常用B+树来构建

#### 跳表
redis中的有序集合用调表来实现

#### 位图
#### 布隆过滤器